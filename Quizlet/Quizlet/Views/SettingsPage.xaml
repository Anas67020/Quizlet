<Page x:Class="Quizlet.Views.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:Quizlet.ViewModel">

    <Page.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFEAD0F7"/>
            <GradientStop Color="#FFB015FF" Offset="1"/>
        </LinearGradientBrush>
    </Page.Background>

    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Page.Resources>

    <Page.DataContext>
        <vm:SettingsVM/>
    </Page.DataContext>

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- LINKS: Auswahl -->
        <StackPanel Grid.Column="0" VerticalAlignment="Top">
            <Button Margin="0,0,0,10" Height="35" Command="{Binding ShowUsernameCommand}">
                Username ändern
            </Button>
            <Button Margin="0,0,0,10" Height="35" Command="{Binding ShowPasswordCommand}">
                Passwort ändern
            </Button>
            <Button Margin="0,0,0,10" Height="35" Command="{Binding ShowEmailCommand}">
                E-Mail ändern
            </Button>

            <Separator Margin="0,10,0,10"/>

            <Button Height="35" Margin="0, 0, 0, 10" Command="{Binding SaveCommand}">
                Speichern
            </Button>
            <Button Height="35" Click="Back_Click">Zurück</Button>

            <TextBlock Margin="0,10,0,0" Text="{Binding StatusText}" TextWrapping="Wrap"/>
        </StackPanel>

        <!-- RECHTS: Inhalt -->
        <Border Grid.Column="2" Background="#20FFFFFF" CornerRadius="10" Padding="15">
            <Grid>
                <!-- USERNAME -->
                <StackPanel Visibility="{Binding UsernameVisible, Converter={StaticResource BoolToVis}}">
                    <TextBlock FontSize="20" FontWeight="Bold" Margin="0,0,0,10">Username ändern</TextBlock>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Vorheriger Username:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding OldUsername}"/>
                    </Grid>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neuer Username:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding NewUsername}"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neuer Username erneut:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding NewUsername2}"/>
                    </Grid>
                </StackPanel>

                <!-- PASSWORT -->
                <StackPanel Visibility="{Binding PasswordVisible, Converter={StaticResource BoolToVis}}">
                    <TextBlock FontSize="20" FontWeight="Bold" Margin="0,0,0,10">Passwort ändern</TextBlock>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Altes Passwort:</TextBlock>
                        <PasswordBox Grid.Column="1" Height="28"
                                     vm:PasswordHelper.Attach="True"
                                     vm:PasswordHelper.Password="{Binding OldPassword}"/>
                    </Grid>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neues Passwort:</TextBlock>
                        <PasswordBox Grid.Column="1" Height="28"
                                     vm:PasswordHelper.Attach="True"
                                     vm:PasswordHelper.Password="{Binding NewPassword}"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neues Passwort erneut:</TextBlock>
                        <PasswordBox Grid.Column="1" Height="28"
                                     vm:PasswordHelper.Attach="True"
                                     vm:PasswordHelper.Password="{Binding NewPassword2}"/>
                    </Grid>
                </StackPanel>

                <!-- EMAIL -->
                <StackPanel Visibility="{Binding EmailVisible, Converter={StaticResource BoolToVis}}">
                    <TextBlock FontSize="20" FontWeight="Bold" Margin="0,0,0,10">E-Mail ändern</TextBlock>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Vorherige E-Mail:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding OldEmail}"/>
                    </Grid>

                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neue E-Mail:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding NewEmail}"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center">Neue E-Mail erneut:</TextBlock>
                        <TextBox Grid.Column="1" Height="28" Text="{Binding NewEmail2}"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
